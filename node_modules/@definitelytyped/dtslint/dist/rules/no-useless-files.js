"use strict";
const util_1 = require("../util");
const rule = (0, util_1.createRule)({
    name: "no-useless-files",
    defaultOptions: [],
    meta: {
        type: "problem",
        docs: {
            description: "Forbids files with no content.",
            recommended: "error",
        },
        messages: {
            noContent: "File has no content.",
        },
        schema: [],
    },
    create(context) {
        var _a;
        const { ast: { tokens, comments }, } = context.getSourceCode();
        if (tokens.length === 0) {
            if (comments.length === 0) {
                reportNoContent();
            }
            else {
                const referenceRegExp = /^\/\s*<reference\s*(types|path)\s*=\s*["|'](.*)["|']/;
                let noReferenceFound = true;
                for (const comment of comments) {
                    const referenceMatch = (_a = comment.value.match(referenceRegExp)) === null || _a === void 0 ? void 0 : _a[1];
                    if (!referenceMatch) {
                        continue;
                    }
                    noReferenceFound = false;
                    break;
                }
                if (noReferenceFound) {
                    reportNoContent();
                }
            }
        }
        return {};
        function reportNoContent() {
            context.report({
                messageId: "noContent",
                loc: {
                    start: { line: 1, column: 0 },
                    end: { line: 1, column: 0 },
                },
            });
        }
    },
});
module.exports = rule;
//# sourceMappingURL=no-useless-files.js.map